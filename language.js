const translations = {
  en: {
    index: {
      title: "Portfolio",
      subtitle:
        "This portfolio is made by and hosted by myself, Simon Helgen. I am a student at the University of Agder and are currently taking my master’s degree in cybersecurity management This website is made to showcase my current and previous work to friends, colleagues and potential employers",
      cv: "View Full CV",
      projects: [
        {
          title: "Evacuation system",
          desc: "Python flask web app with biometric and RFID scanning in emergency situations",
          year: "2024",
        },
        {
          title: "AI drone protection system",
          desc: "IOT AI computer vision powered robot that detects and shoots drone",
          year: "2023",
        },
        {
          title: "Web based note taking application",
          desc: "Simple to use notetaking application made by Python flask and styled with tailwindcss",
          year: "2023",
        },
        {
          title: "Management repair system",
          desc: ".NET MVC webapplication with login and auth",
          year: "2022",
        },
        {
          title: "Home lab",
          desc: "My current and future home lab with servers and applications I am hosting my self",
          year: "2025",
        },
      ],
    },
    exitnode: {
      title: "Evacuation system for emergency services",
      desc: "Python flask web app with biometric and RFID scanning in emergency situations",
      features: "Features",
      feature_list: [
        "Biometric authentication",
        "RFID badge scanning",
        "Emergency reporting dashboard",
      ],
      back: "Back to Portfolio",
    },
    inkay: {
      title: "Web based note taking application",
      desc: "Simple to use notetaking application made by Python flask and styled with tailwindcss",
      features: "Features",
      feature_list: [
        "Rich text editing",
        "Tagging and search",
        "Cloud sync",
        "Login and account creation",
      ],
      back: "Back to Portfolio",
    },
    IoT: {
      title: "AI drone protection system",
      desc: "IOT AI computer vision powered robot that detects and neutralizes drone",
      features: "Features",
      feature_list: [
        "Real-time drone detection",
        "Automated response",
        "Remote monitoring",
      ],
      back: "Back to Portfolio",
    },
    noested: {
      title: "Management repair system",
      desc: ".NET MVC webapplication with login and auth",
      features: "Features",
      feature_list: [
        "User authentication",
        "Repair ticket management",
        "Admin dashboard",
      ],
      back: "Back to Portfolio",
    },
    homelab: {
      title: "Homelab",
      desc: "Current and future homelab setup and projects under work",
      hardware: "Hardware",
      hardware_list: [
        "Raspberry pi 4 8gb ram"
    ],
      services: "Services",
      services_list: [
        "Webserver (shelgen.no)",
        "NAS"
    ],
      back: "Back to Portfolio",
    },
    system_info: {
      title: "System Information",
      desc: "Overview of system status and configuration.",
      os: "Operating System",
      cpu: "CPU",
      memory: "Memory",
      back: "Back to Portfolio",
    },
    footer: {
      about: "About this page.",
    },
    toggle: "Norsk",
    cv: {
      cv_title: "About Me",
      cv_name: "Simon Helgen",
      cv_background_title: "Background",
      cv_background_desc:
        "I am currently a master’s student specializing in cybersecurity management, working toward a future career in the cybersecurity field. My passion for IT and cybersecurity stems from a desire to improve the relationship between humans and computers. I aspire to make technology a more useful, accessible, and reliable tool that simplifies our daily lives. My goal is to contribute to building secure and user-friendly digital environments for everyone.",
      cv_skills_title: "Skills & Expertise",
      cv_frontend_title: "Frontend",
      cv_frontend_desc: "HTML, Javascript, Flask, Tailwind CSS",
      cv_backend_title: "Backend",
      cv_backend_desc: "Node.js, Python, Nginx, mySQL",
      cv_devops_title: "DevOps",
      cv_devops_desc: "Docker, Azure, Git, Github",
      cv_leisure_title: "When I'm Not Coding",
      cv_leisure_desc:
        "In my free time, I enjoy exploring new technologies, staying curious about the latest innovations and tools. I’m also passionate about fitness, dedicating time to working out regularly to stay active and healthy. Additionally, I like to bouldering, challenging myself physically and mentally while enjoying the thrill of climbing.",
      cv_edu_exp_title: "Education & Experience",
      cv_edu_title: "Education & Certifications",
      cv_edu_masters_title: "Master of cybersecurity management",
      cv_edu_masters_place: "University of Agder • 2025-2027",
      cv_edu_masters_desc:
        "Focus practical and theoretical knowledge, as well as methodological skills for implementing and managing security measures in organizations nationally and internationally",
      cv_edu_bachelor_title: "Bachelor of IT and information systems",
      cv_edu_bachelor_place: "University of Agder • 2022-2025",
      cv_edu_bachelor_desc:
        "Gain essential skills to analyze user needs, design and develop IT systems, understand their role in organizations and society, and support effective use of information systems to achieve goals.",
      cv_edu_highschool_title: "Bachelor of IT and information systems",
      cv_edu_highschool_place: "Skien High school • 2017-2019",
      cv_edu_highschool_desc: "Information comunnication technology (ICT).",
      cv_edu_google_title:
        "Working towards: Google Cybersecurity Professional Certificate",
      cv_edu_google_place: "Google Cybersecurity Professional • 2025",
      cv_work_title: "Work Experience",
      cv_work_internship_title: "Internship digitization",
      cv_work_internship_place:
        "Kristiansand Municipality • Sep.2024 - Des.2024",
      cv_work_internship_desc:
        "Digitize municipal citizen services like “Min Side” and meeting bookings, automate planning and building processes, train staff in digital systems, and manage the website through a CMS.",
      cv_work_summer_title: "Summer internship",
      cv_work_summer_place: "Skagerak Energi AS • Jun.2023 - Aug.2023",
      cv_work_summer_desc:
        "Tested and rolled out Windows 11 upgrade, and Communicated with employees and project managers for a smooth transition from Windows 10 to Windows 11, using Intune for the rollout.",
      cv_work_ikt_title: "IKT lærling",
      cv_work_ikt_place: "Forsvarets høgskole • 2019 - 2021",
      cv_work_ikt_desc:
        "ICT Service Operations og local user administrator ICT",
    },
  },
  no: {
    index: {
      title: "Portefølje",
      subtitle:
        "Denne porteføljen er laget av og driftet av meg selv, Simon Helgen. Jeg er student ved Universitetet i Agder og tar for tiden mastergrad i cybersikkerhetsledelse. Denne nettsiden er laget for å vise frem mitt nåværende og tidligere arbeid til venner, kolleger og potensielle arbeidsgivere.",
      cv: "Se full CV",
      projects: [
        {
          title: "Evakueringssystem",
          desc: "Python Flask webapp med biometrisk og RFID-skanning i nødsituasjoner",
          year: "2024",
        },
        {
          title: "AI dronesikringssystem",
          desc: "IOT AI datavisjon-robot som oppdager og skyter droner",
          year: "2023",
        },
        {
          title: "Nettbasert notatapplikasjon",
          desc: "Enkel notatapp laget med Python Flask og stylet med TailwindCSS",
          year: "2023",
        },
        {
          title: "Administrasjons- og reparasjonssystem",
          desc: ".NET MVC webapplikasjon med innlogging og autentisering",
          year: "2022",
        },
        {
          title: "Hjemmelab",
          desc: "Min nåværende og fremtidige lab med servere og applikasjonener jeg kjører selv",
          year: "2025",
        },
      ],
    },
    exitnode: {
      title: "Evakueringssystem for nødetater",
      desc: "Python Flask webapp med biometrisk og RFID-skanning i nødsituasjoner",
      features: "Funksjoner",
      feature_list: [
        "Biometrisk autentisering",
        "RFID-brikkeskanning",
        "Nødrapporteringspanel",
      ],
      back: "Tilbake til portefølje",
    },
    inkay: {
      title: "Nettbasert notatapplikasjon",
      desc: "Enkel notatapp laget med Python Flask og stylet med TailwindCSS",
      features: "Funksjoner",
      feature_list: [
        "Rik tekstredigering",
        "Tagging og søk",
        "Sky-synkronisering",
        "Innlogging og kontoopprettelse",
      ],
      back: "Tilbake til portefølje",
    },
    IoT: {
      title: "KI dronesikringssystem",
      desc: "IOT KI datavisjon-robot som oppdager og nøytraliserer droner",
      features: "Funksjoner",
      feature_list: [
        "Sanntids droneoppdagelse",
        "Automatisert respons",
        "Fjernovervåking",
      ],
      back: "Tilbake til portefølje",
    },
    noested: {
      title: "Administrasjons- og reparasjonssystem",
      desc: ".NET MVC webapplikasjon med innlogging og autentisering",
      features: "Funksjoner",
      feature_list: [
        "Brukerautentisering",
        "Reparasjonsbillett-håndtering",
        "Adminpanel",
      ],
      back: "Tilbake til portefølje",
    },
    homelab: {
      title: "Hjemme lab",
      desc: "Nåverende og fremtidige oppsett hjemmelab oppsett og prosjekter under utvikling",
      hardware: "Maskinvare",
      hardware_list: [
        "Raspberry pi 4 8gb ram"
    ],
      services: "Tjenester",
      services_list: [
        "Webserver (shelgen.no)",
        "NAS"
    ],
      back: "Back to Portfolio",
    },
    system_info: {
      title: "Systeminformasjon",
      desc: "Oversikt over systemstatus og konfigurasjon.",
      os: "Operativsystem",
      cpu: "Prosessor",
      memory: "Minne",
      back: "Tilbake til portefølje",
    },
    footer: {
      about: "Om denne siden.",
    },
    toggle: "English",
    cv: {
      cv_title: "Om meg",
      cv_name: "Simon Helgen",
      cv_background_title: "Bakgrunn",
      cv_background_desc:
        "Jeg er for tiden masterstudent med spesialisering i cybersikkerhetsledelse, og jobber mot en fremtidig karriere innen cybersikkerhet. Min lidenskap for IT og cybersikkerhet kommer fra et ønske om å forbedre forholdet mellom mennesker og datamaskiner. Jeg ønsker å gjøre teknologi til et mer nyttig, tilgjengelig og pålitelig verktøy som forenkler hverdagen vår. Målet mitt er å bidra til å bygge sikre og brukervennlige digitale miljøer for alle.",
      cv_skills_title: "Ferdigheter og kompetanse",
      cv_frontend_title: "Frontend",
      cv_frontend_desc: "HTML, Javascript, Flask, Tailwind CSS",
      cv_backend_title: "Backend",
      cv_backend_desc: "Node.js, Python, Nginx, mySQL",
      cv_devops_title: "DevOps",
      cv_devops_desc: "Docker, Azure, Git, Github",
      cv_leisure_title: "Når jeg ikke koder",
      cv_leisure_desc:
        "På fritiden liker jeg å utforske ny teknologi og holde meg nysgjerrig på de siste innovasjonene og verktøyene. Jeg er også opptatt av trening, og setter av tid til å trene regelmessig for å holde meg aktiv og sunn. I tillegg liker jeg buldring, hvor jeg utfordrer meg selv både fysisk og mentalt, og nyter spenningen ved klatring.",
      cv_edu_exp_title: "Utdanning og erfaring",
      cv_edu_title: "Utdanning og sertifiseringer",
      cv_edu_masters_title: "Master i cybersikkerhetsledelse",
      cv_edu_masters_place: "Universitetet i Agder • 2025-2027",
      cv_edu_masters_desc:
        "Fokus på praktisk og teoretisk kunnskap, samt metodiske ferdigheter for å implementere og lede sikkerhetstiltak i organisasjoner nasjonalt og internasjonalt",
      cv_edu_bachelor_title: "Bachelor i IT og informasjonssystemer",
      cv_edu_bachelor_place: "Universitetet i Agder • 2022-2025",
      cv_edu_bachelor_desc:
        "Tilegn deg essensielle ferdigheter for å analysere brukerbehov, designe og utvikle IT-systemer, forstå deres rolle i organisasjoner og samfunn, og støtte effektiv bruk av informasjonssystemer for å nå mål.",
      cv_edu_highschool_title:
        "Informasjonsteknologi (IT) og informasjonssystemer",
      cv_edu_highschool_place: "Skien videregående skole • 2017-2019",
      cv_edu_highschool_desc: "Informasjons- og kommunikasjonsteknologi (IKT).",
      cv_edu_google_title:
        "Jobber mot: Google Cybersecurity Professional Certificate",
      cv_edu_google_place: "Google Cybersecurity Professional • 2025",
      cv_work_title: "Arbeidserfaring",
      cv_work_internship_title: "Digitaliseringspraksis",
      cv_work_internship_place: "Kristiansand kommune • sep.2024 - des.2024",
      cv_work_internship_desc:
        "Digitalisere kommunale innbyggertjenester som “Min Side” og møtebooking, automatisere plan- og byggesaksprosesser, opplæring av ansatte i digitale systemer og administrere nettsiden via CMS.",
      cv_work_summer_title: "Sommerjobb",
      cv_work_summer_place: "Skagerak Energi AS • jun.2023 - aug.2023",
      cv_work_summer_desc:
        "Testet og rullet ut Windows 11-oppgradering, og kommuniserte med ansatte og prosjektledere for en smidig overgang fra Windows 10 til Windows 11, med bruk av Intune.",
      cv_work_ikt_title: "IKT-lærling",
      cv_work_ikt_place: "Forsvarets høgskole • 2019 - 2021",
      cv_work_ikt_desc: "IKT-drift og lokal brukeradministrator IKT",
    },
  },
};

function getPageKey() {
  // Map file names to translation keys
  const map = {
    "index.html": "index",
    "exitnode.html": "exitnode",
    "inkay.html": "inkay",
    "iot.html": "IoT",
    "noested.html": "noested",
    "homelab.html": "homelab",
    "system_info.html": "system_info",
    "footer.html": "footer",
    "cv.html": "cv",
  };
  const file = window.location.pathname.split("/").pop().toLowerCase();
  return map[file] || "index";
}

function getBrowserLang() {
  const lang = navigator.language || navigator.userLanguage;
  return lang.startsWith("no") ? "no" : "en";
}

function setLanguage(lang) {
  document.documentElement.lang = lang;
  const pageKey = getPageKey();
  const pageTranslations = translations[lang][pageKey] || {};

  // Update elements by ID
  for (const key in pageTranslations) {
    if (key === "feature_list" || key === "projects") continue;
    const el = document.getElementById(key);
    if (el) el.textContent = pageTranslations[key];
  }

  // Update feature lists if present
  if (pageTranslations.feature_list) {
    const list = document.getElementById("feature-list");
    if (list) {
      list.innerHTML = "";
      pageTranslations.feature_list.forEach((item) => {
        const li = document.createElement("li");
        li.textContent = item;
        list.appendChild(li);
      });
    }
  }

  // Update projects (for index page)
  if (translations[lang].index.projects && pageKey === "index") {
    const projectEls = document.querySelectorAll(".project-item");
    translations[lang].index.projects.forEach((proj, i) => {
      if (projectEls[i]) {
        projectEls[i].querySelector("h3").textContent = proj.title;
        projectEls[i].querySelector("p").textContent = proj.desc;
        projectEls[i].querySelector(".text-gray-500").textContent = proj.year;
      }
    });
  }

  // Update footer
  if (translations[lang].footer) {
    for (const key in translations[lang].footer) {
      const el = document.getElementById(`footer-${key}`);
      if (el) el.textContent = translations[lang].footer[key];
    }
  }

  // Update toggle button
  const toggle = document.getElementById("lang-toggle");
  if (toggle) toggle.textContent = translations[lang].toggle;
}

// Load footer.html into #footer-placeholder
fetch("footer.html")
  .then((response) => response.text())
  .then((html) => {
    document.getElementById("footer-placeholder").innerHTML = html;
    // Now the footer is in the DOM, so attach the event listener:
    attachLangToggle();
  });

function attachLangToggle() {
  const toggle = document.getElementById("lang-toggle");
  if (toggle) {
    toggle.addEventListener("click", () => {
      let lang = document.documentElement.lang === "en" ? "no" : "en";
      setLanguage(lang);
    });
  }
}
